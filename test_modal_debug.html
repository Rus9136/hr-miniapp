<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–û—Ç–ª–∞–¥–∫–∞ –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞</title>
    <style>
        body { font-family: Arial, sans-serif; padding: 20px; }
        .debug-panel { background: #f8f9fa; padding: 15px; margin-bottom: 15px; border-radius: 4px; }
        .btn { background: #007bff; color: white; border: none; padding: 8px 16px; border-radius: 4px; cursor: pointer; margin: 5px; }
        .log { background: #000; color: #00ff00; padding: 10px; border-radius: 4px; font-family: monospace; font-size: 12px; max-height: 300px; overflow-y: auto; }
    </style>
</head>
<body>
    <h1>üîß –û—Ç–ª–∞–¥–∫–∞ –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞</h1>
    
    <div class="debug-panel">
        <h3>–®–∞–≥–∏ –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏:</h3>
        <ol>
            <li>–°–Ω–∞—á–∞–ª–∞ –∞–≤—Ç–æ—Ä–∏–∑—É–π—Ç–µ—Å—å –≤ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏ –∫–∞–∫ <strong>admin12qw</strong></li>
            <li>–ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ —Ä–∞–∑–¥–µ–ª "–°–æ—Ç—Ä—É–¥–Ω–∏–∫–∏"</li>
            <li>–ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É ‚úèÔ∏è —Ä—è–¥–æ–º —Å –ª—é–±—ã–º —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–º</li>
            <li>–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞ (F12) –Ω–∞ –Ω–∞–ª–∏—á–∏–µ –æ—à–∏–±–æ–∫</li>
        </ol>
    </div>
    
    <div class="debug-panel">
        <h3>–¢–µ—Å—Ç–æ–≤—ã–µ –¥–µ–π—Å—Ç–≤–∏—è:</h3>
        <button class="btn" onclick="checkAdminPanel()">–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å</button>
        <button class="btn" onclick="testModal()">–¢–µ—Å—Ç –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞</button>
        <button class="btn" onclick="checkGlobalHandlers()">–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏</button>
        <button class="btn" onclick="clearDebugLog()">–û—á–∏—Å—Ç–∏—Ç—å –ª–æ–≥</button>
    </div>
    
    <div class="log" id="debugLog">–õ–æ–≥ –æ—Ç–ª–∞–¥–∫–∏...\n</div>

    <script>
        function log(message) {
            const logElement = document.getElementById('debugLog');
            const timestamp = new Date().toLocaleTimeString();
            logElement.textContent += `[${timestamp}] ${message}\n`;
            logElement.scrollTop = logElement.scrollHeight;
        }
        
        function clearDebugLog() {
            document.getElementById('debugLog').textContent = '–õ–æ–≥ –æ—á–∏—â–µ–Ω...\n';
        }
        
        function checkAdminPanel() {
            log('üîç –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏...');
            
            // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –∑–∞–≥—Ä—É–∂–µ–Ω—ã –ª–∏ —Ñ—É–Ω–∫—Ü–∏–∏ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏
            const functions = [
                'switchSection', 'loadEmployees', 'openEmployeeModal', 
                'closeEmployeeModal', 'initEmployeeModal'
            ];
            
            functions.forEach(funcName => {
                if (typeof window[funcName] === 'function') {
                    log(`‚úÖ –§—É–Ω–∫—Ü–∏—è ${funcName} –¥–æ—Å—Ç—É–ø–Ω–∞`);
                } else {
                    log(`‚ùå –§—É–Ω–∫—Ü–∏—è ${funcName} –Ω–µ –Ω–∞–π–¥–µ–Ω–∞`);
                }
            });
            
            // –ü—Ä–æ–≤–µ—Ä—è–µ–º –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ
            if (typeof window.employeesData !== 'undefined') {
                log(`‚úÖ employeesData –¥–æ—Å—Ç—É–ø–Ω–∞ (${window.employeesData.length} –∑–∞–ø–∏—Å–µ–π)`);
            } else {
                log('‚ùå employeesData –Ω–µ –Ω–∞–π–¥–µ–Ω–∞');
            }
            
            // –ü—Ä–æ–≤–µ—Ä—è–µ–º DOM —ç–ª–µ–º–µ–Ω—Ç—ã
            const elements = ['adminScreen', 'employeeModal', 'employees-tbody'];
            elements.forEach(id => {
                const element = document.getElementById(id);
                if (element) {
                    log(`‚úÖ –≠–ª–µ–º–µ–Ω—Ç ${id} –Ω–∞–π–¥–µ–Ω (display: ${element.style.display || 'default'})`);
                } else {
                    log(`‚ùå –≠–ª–µ–º–µ–Ω—Ç ${id} –Ω–µ –Ω–∞–π–¥–µ–Ω`);
                }
            });
        }
        
        function testModal() {
            log('üß™ –¢–µ—Å—Ç–∏—Ä—É–µ–º –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ...');
            
            if (typeof window.openEmployeeModal === 'function') {
                log('‚úÖ –§—É–Ω–∫—Ü–∏—è openEmployeeModal –Ω–∞–π–¥–µ–Ω–∞');
                
                // –ü—Ä–æ–≤–µ—Ä—è–µ–º –¥–∞–Ω–Ω—ã–µ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤
                if (window.employeesData && window.employeesData.length > 0) {
                    const testEmployee = window.employeesData[0];
                    log(`–¢–µ—Å—Ç–∏—Ä—É–µ–º —Å —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–º: ${testEmployee.table_number}`);
                    
                    try {
                        window.openEmployeeModal(testEmployee.table_number);
                        log('‚úÖ –§—É–Ω–∫—Ü–∏—è openEmployeeModal –≤—ã–ø–æ–ª–Ω–µ–Ω–∞');
                    } catch (error) {
                        log(`‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–∏–∏ –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞: ${error.message}`);
                    }
                } else {
                    log('‚ùå –ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è');
                    log('üí° –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤—ã –≤ —Ä–∞–∑–¥–µ–ª–µ "–°–æ—Ç—Ä—É–¥–Ω–∏–∫–∏" –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏');
                }
            } else {
                log('‚ùå –§—É–Ω–∫—Ü–∏—è openEmployeeModal –Ω–µ –Ω–∞–π–¥–µ–Ω–∞');
                log('üí° –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å –∑–∞–≥—Ä—É–∂–µ–Ω–∞');
            }
        }
        
        function checkGlobalHandlers() {
            log('üîç –ü—Ä–æ–≤–µ—Ä—è–µ–º –≥–ª–æ–±–∞–ª—å–Ω—ã–µ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–æ–±—ã—Ç–∏–π...');
            
            // –ü—Ä–æ–≤–µ—Ä—è–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∫–ª–∏–∫–∞ –Ω–∞ document
            const clickEvents = getEventListeners ? getEventListeners(document) : null;
            if (clickEvents && clickEvents.click) {
                log(`–ù–∞–π–¥–µ–Ω–æ ${clickEvents.click.length} –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ click –Ω–∞ document`);
                clickEvents.click.forEach((handler, index) => {
                    log(`  ${index + 1}. ${handler.listener.name || 'anonymous'}`);
                });
            } else {
                log('–ù–µ —É–¥–∞–ª–æ—Å—å –ø–æ–ª—É—á–∏—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ–± –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∞—Ö (–æ—Ç–∫—Ä–æ–π—Ç–µ DevTools)');
            }
            
            // –ü—Ä–æ–≤–µ—Ä—è–µ–º —Ç–µ–∫—É—â–∏–π —ç–∫—Ä–∞–Ω
            const screens = document.querySelectorAll('.screen');
            let activeScreen = null;
            screens.forEach(screen => {
                if (screen.classList.contains('active') || screen.style.display !== 'none') {
                    activeScreen = screen.id;
                }
            });
            
            log(`–ê–∫—Ç–∏–≤–Ω—ã–π —ç–∫—Ä–∞–Ω: ${activeScreen || '–Ω–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω'}`);
        }
        
        // –ü–µ—Ä–µ—Ö–≤–∞—Ç—ã–≤–∞–µ–º –≥–ª–æ–±–∞–ª—å–Ω—ã–µ –æ—à–∏–±–∫–∏
        window.addEventListener('error', (event) => {
            log(`‚ùå –ì–ª–æ–±–∞–ª—å–Ω–∞—è –æ—à–∏–±–∫–∞: ${event.message} –≤ ${event.filename}:${event.lineno}`);
        });
        
        // –ü–µ—Ä–µ—Ö–≤–∞—Ç—ã–≤–∞–µ–º –Ω–µ—Ö–≤–∞—Ç—ã–≤–∞—é—â–∏–µ –ø—Ä–æ–º–∏—Å—ã
        window.addEventListener('unhandledrejection', (event) => {
            log(`‚ùå –ù–µ–æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω–æ–µ –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏–µ –ø—Ä–æ–º–∏—Å–∞: ${event.reason}`);
        });
        
        log('üöÄ –°—Ç—Ä–∞–Ω–∏—Ü–∞ –æ—Ç–ª–∞–¥–∫–∏ –∑–∞–≥—Ä—É–∂–µ–Ω–∞');
        log('üìù –û—Ç–∫—Ä–æ–π—Ç–µ –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞ (F12) –¥–ª—è –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏');
    </script>
</body>
</html>