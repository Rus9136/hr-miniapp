#!/bin/bash

echo "=== –î–µ–ø–ª–æ–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–∞ –æ—á–∏—Å—Ç–∫–∏ —Ç–∞–±–ª–∏—Ü –≤ –ø—Ä–æ–¥–∞–∫—à–Ω ==="
echo ""

# 1. –ö–æ–ø–∏—Ä—É–µ–º –æ–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã –≤ Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä
echo "1. –û–±–Ω–æ–≤–ª—è–µ–º —Ñ–∞–π–ª—ã –≤ Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ..."
docker cp backend/routes/admin.js hr-miniapp:/app/backend/routes/admin.js
docker cp index.html hr-miniapp:/app/index.html
docker cp admin.js hr-miniapp:/app/admin.js
docker cp style.css hr-miniapp:/app/style.css

# 2. –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞–µ–º –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä
echo ""
echo "2. –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞–µ–º –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä..."
docker restart hr-miniapp

# 3. –ñ–¥–µ–º –∑–∞–ø—É—Å–∫–∞
echo ""
echo "3. –ñ–¥–µ–º –∑–∞–ø—É—Å–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞..."
sleep 10

# 4. –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å—Ç–∞—Ç—É—Å
echo ""
echo "4. –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å—Ç–∞—Ç—É—Å..."
curl -s https://madlen.space/api/health | jq .

echo ""
echo "–î–µ–ø–ª–æ–π –∑–∞–≤–µ—Ä—à–µ–Ω!"
echo ""
echo "–ù–æ–≤—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏:"
echo "- –ö–Ω–æ–ø–∫–∞ 'üóëÔ∏è –û—á–∏—Å—Ç–∏—Ç—å —Ç–∞–±–ª–∏—Ü—É' –≤ —Ä–∞–∑–¥–µ–ª–µ '–í—Ö–æ–¥—ã/–≤—ã—Ö–æ–¥—ã'"
echo "- –ö–Ω–æ–ø–∫–∞ 'üóëÔ∏è –û—á–∏—Å—Ç–∏—Ç—å —Ç–∞–±–ª–∏—Ü—É' –≤ —Ä–∞–∑–¥–µ–ª–µ '–¢–∞–±–µ–ª—å —Ä–∞–±–æ—á–µ–≥–æ –≤—Ä–µ–º–µ–Ω–∏'"
echo "- –î–≤–æ–π–Ω–æ–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –ø–µ—Ä–µ–¥ —É–¥–∞–ª–µ–Ω–∏–µ–º"
echo "- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ç–∞–±–ª–∏—Ü—ã –ø–æ—Å–ª–µ –æ—á–∏—Å—Ç–∫–∏"