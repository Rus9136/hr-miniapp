Server running on port 3030
Timezone set to Asia/Almaty for new connection
Database timezone set to Asia/Almaty
✅ PostgreSQL database initialized successfully
Database initialized successfully
Starting initial data sync...
Starting data synchronization...
Synced 535 departments
Synced 6068 positions
Synced 2944 employees
Sync completed: 535 departments, 6068 positions, 2944 employees
Initial data sync completed
Assigning schedule "Вечерняя смена" to 2 employees from 2025-07-01
Processing employee: Ахметова Жанар Оразбаевна (EUA-518524)
Found existing schedule for Ахметова Жанар Оразбаевна: Вечерняя смена from Tue Jul 01 2025 00:00:00 GMT+0200 (Central European Summer Time)
Error processing employee 2025: error: new row for relation "employee_schedule_history" violates check constraint "valid_date_range"
    at /root/projects/hr-miniapp/node_modules/pg-pool/index.js:45:11
    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
    at async /root/projects/hr-miniapp/backend/routes/admin.js:748:25 {
  length: 322,
  severity: 'ERROR',
  code: '23514',
  detail: 'Failing row contains (1, 2025, EUA-518524, 11, 2025-07-01, 2025-06-30, test_admin, 2025-06-04 11:32:34.545775).',
  hint: undefined,
  position: undefined,
  internalPosition: undefined,
  internalQuery: undefined,
  where: undefined,
  schema: 'public',
  table: 'employee_schedule_history',
  column: undefined,
  dataType: undefined,
  constraint: 'valid_date_range',
  file: 'execMain.c',
  line: '2058',
  routine: 'ExecConstraints'
}
Timezone set to Asia/Almaty for new connection
Processing employee: Ахметова Жанар Оразбаевна (EUA-518524)
Found existing schedule for Ахметова Жанар Оразбаевна: Вечерняя смена from Tue Jul 01 2025 00:00:00 GMT+0200 (Central European Summer Time)
Error processing employee 2025: error: new row for relation "employee_schedule_history" violates check constraint "valid_date_range"
    at /root/projects/hr-miniapp/node_modules/pg-pool/index.js:45:11
    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
    at async /root/projects/hr-miniapp/backend/routes/admin.js:748:25 {
  length: 322,
  severity: 'ERROR',
  code: '23514',
  detail: 'Failing row contains (1, 2025, EUA-518524, 11, 2025-07-01, 2025-06-30, test_admin, 2025-06-04 11:32:34.545775).',
  hint: undefined,
  position: undefined,
  internalPosition: undefined,
  internalQuery: undefined,
  where: undefined,
  schema: 'public',
  table: 'employee_schedule_history',
  column: undefined,
  dataType: undefined,
  constraint: 'valid_date_range',
  file: 'execMain.c',
  line: '2058',
  routine: 'ExecConstraints'
}
Timezone set to Asia/Almaty for new connection
Assignment completed: 0 assigned, 2 skipped
Assigning schedule "Вечерняя смена" to 1 employees from 2025-06-15
Processing employee: Ахметова Жанар Оразбаевна (EUA-518524)
Found existing schedule for Ахметова Жанар Оразбаевна: Вечерняя смена from Sun Jun 15 2025 00:00:00 GMT+0200 (Central European Summer Time)
Error processing employee 2025: error: new row for relation "employee_schedule_history" violates check constraint "valid_date_range"
    at /root/projects/hr-miniapp/node_modules/pg-pool/index.js:45:11
    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
    at async /root/projects/hr-miniapp/backend/routes/admin.js:748:25 {
  length: 322,
  severity: 'ERROR',
  code: '23514',
  detail: 'Failing row contains (3, 2025, EUA-518524, 11, 2025-06-15, 2025-06-14, test_admin, 2025-06-04 11:32:34.772256).',
  hint: undefined,
  position: undefined,
  internalPosition: undefined,
  internalQuery: undefined,
  where: undefined,
  schema: 'public',
  table: 'employee_schedule_history',
  column: undefined,
  dataType: undefined,
  constraint: 'valid_date_range',
  file: 'execMain.c',
  line: '2058',
  routine: 'ExecConstraints'
}
Timezone set to Asia/Almaty for new connection
Assignment completed: 0 assigned, 1 skipped
Assigning schedule "Вечерняя смена" to 1 employees from 2025-07-01
Processing employee: Ахметова Жанар Оразбаевна (EUA-518524)
Found existing schedule for Ахметова Жанар Оразбаевна: Вечерняя смена from Tue Jul 01 2025 00:00:00 GMT+0200 (Central European Summer Time)
Error processing employee 2025: error: new row for relation "employee_schedule_history" violates check constraint "valid_date_range"
    at /root/projects/hr-miniapp/node_modules/pg-pool/index.js:45:11
    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
    at async /root/projects/hr-miniapp/backend/routes/admin.js:748:25 {
  length: 322,
  severity: 'ERROR',
  code: '23514',
  detail: 'Failing row contains (1, 2025, EUA-518524, 11, 2025-07-01, 2025-06-30, test_admin, 2025-06-04 11:32:34.545775).',
  hint: undefined,
  position: undefined,
  internalPosition: undefined,
  internalQuery: undefined,
  where: undefined,
  schema: 'public',
  table: 'employee_schedule_history',
  column: undefined,
  dataType: undefined,
  constraint: 'valid_date_range',
  file: 'execMain.c',
  line: '2058',
  routine: 'ExecConstraints'
}
Timezone set to Asia/Almaty for new connection
Assignment completed: 0 assigned, 1 skipped
Assigning schedule "Вечерняя смена" to 2 employees from 2025-07-01
Processing employee: Ахметова Жанар Оразбаевна (EUA-518524)
Found existing schedule for Ахметова Жанар Оразбаевна: Вечерняя смена from Tue Jul 01 2025 00:00:00 GMT+0200 (Central European Summer Time)
Error processing employee 2025: error: new row for relation "employee_schedule_history" violates check constraint "valid_date_range"
    at /root/projects/hr-miniapp/node_modules/pg-pool/index.js:45:11
    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
    at async /root/projects/hr-miniapp/backend/routes/admin.js:748:25 {
  length: 322,
  severity: 'ERROR',
  code: '23514',
  detail: 'Failing row contains (1, 2025, EUA-518524, 11, 2025-07-01, 2025-06-30, test_admin, 2025-06-04 11:32:34.545775).',
  hint: undefined,
  position: undefined,
  internalPosition: undefined,
  internalQuery: undefined,
  where: undefined,
  schema: 'public',
  table: 'employee_schedule_history',
  column: undefined,
  dataType: undefined,
  constraint: 'valid_date_range',
  file: 'execMain.c',
  line: '2058',
  routine: 'ExecConstraints'
}
Timezone set to Asia/Almaty for new connection
Assignment completed: 0 assigned, 2 skipped
Timezone set to Asia/Almaty for new connection
Assigning schedule "Вечерняя смена" to 2 employees from 2025-09-02
Processing employee: Ахметова Жанар Оразбаевна (EUA-518524)
Found existing schedule for Ахметова Жанар Оразбаевна: Вечерняя смена from Tue Jul 01 2025 00:00:00 GMT+0200 (Central European Summer Time)
Ended previous schedule for Ахметова Жанар Оразбаевна on 2025-09-01
Assigned new schedule to Ахметова Жанар Оразбаевна from 2025-09-02
Processing employee: Ахметова Жанар Оразбаевна (EUA-518524)
Found existing schedule for Ахметова Жанар Оразбаевна: Вечерняя смена from Sun Jun 15 2025 00:00:00 GMT+0200 (Central European Summer Time)
Ended previous schedule for Ахметова Жанар Оразбаевна on 2025-09-01
Assigned new schedule to Ахметова Жанар Оразбаевна from 2025-09-02
Assignment completed: 2 assigned, 0 skipped
Assigning schedule "Вечерняя смена" to 1 employees from 2025-07-04
Processing employee: Ахметова Жанар Оразбаевна (EUA-518524)
Found existing schedule for Ахметова Жанар Оразбаевна: Вечерняя смена from Tue Jul 01 2025 00:00:00 GMT+0200 (Central European Summer Time)
Ended previous schedule for Ахметова Жанар Оразбаевна on 2025-07-03
Assigned new schedule to Ахметова Жанар Оразбаевна from 2025-07-04
Assignment completed: 1 assigned, 0 skipped
Assigning schedule "Вечерняя смена" to 1 employees from 2025-08-03
Processing employee: Ахметова Жанар Оразбаевна (EUA-518524)
Found existing schedule for Ахметова Жанар Оразбаевна: Вечерняя смена from Sun Jun 15 2025 00:00:00 GMT+0200 (Central European Summer Time)
Ended previous schedule for Ахметова Жанар Оразбаевна on 2025-08-02
Assigned new schedule to Ахметова Жанар Оразбаевна from 2025-08-03
Assignment completed: 1 assigned, 0 skipped
Assigning schedule "Вечерняя смена" to 2 employees from 2025-10-02
Processing employee: Ахметова Жанар Оразбаевна (EUA-518524)
Found existing schedule for Ахметова Жанар Оразбаевна: Вечерняя смена from Tue Sep 02 2025 00:00:00 GMT+0200 (Central European Summer Time)
Ended previous schedule for Ахметова Жанар Оразбаевна on 2025-10-01
Assigned new schedule to Ахметова Жанар Оразбаевна from 2025-10-02
Assignment completed: 1 assigned, 1 skipped
