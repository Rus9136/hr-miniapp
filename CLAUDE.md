# HR Time Tracking Mini App - Claude Code Context

## Обзор проекта
Веб-приложение для учета рабочего времени сотрудников с интеграцией внешнего API системы учета по отпечаткам пальцев.

## Архитектура
- **Backend**: Node.js + Express + SQLite
- **Frontend**: Vanilla JS + HTML/CSS
- **Порты**: Backend - 3030, Frontend - 5555

## Ключевые команды
```bash
# Установка и запуск
npm install && npm start

# Запуск только backend
node backend/server.js

# Запуск только frontend
python3 -m http.server 5555
```

## API эндпоинты

### Основное приложение
- `POST /api/login` - вход по табельному номеру
- `GET /api/employee/:id/timesheet/:year/:month` - календарь посещений
- `GET /api/employee/:id/statistics/:year/:month` - статистика за месяц

### Админ-панель
- `GET /api/admin/employees` - список сотрудников с пагинацией
- `GET /api/admin/departments` - список подразделений
- `GET /api/admin/positions` - список должностей
- `POST /api/admin/sync` - ручная синхронизация с внешним API
- `POST /api/admin/upload/timesheet` - загрузка табельных данных из Excel
- `GET /api/admin/sync/status` - статус последней синхронизации

## Внешний API
База: http://tco.aqnietgroup.com:5555/v1
- `/objects` - подразделения
- `/staff_position` - должности  
- `/staff` - сотрудники
- `/event/filter` - события входа/выхода

## Тестовые данные
Табельный номер для тестирования: **АП00-00358**
(Суиндикова Сайраш Агабековна - есть данные за май 2025)

## Админ-панель
Доступ: табельный номер **admin12qw**

### Функционал:
1. **Справочники** - просмотр списков сотрудников, подразделений, должностей
2. **Загрузка данных**:
   - Синхронизация с внешним API (подразделения, должности, сотрудники)
   - Загрузка табельных данных из Excel файлов
   - Отображение статуса последней синхронизации
   - Прогресс-бар для длительных операций

## Известные особенности
1. Табельные номера содержат буквы - используется input type="text"
2. При проблемах с отображением экранов добавлен fallback через style.display
3. Python HTTP сервер используется вместо http-server для стабильности
4. Внешний API часто не возвращает данные - созданы тестовые записи

## Структура БД
- departments - подразделения
- positions - должности
- employees - сотрудники  
- time_events - события входа/выхода
- time_records - обработанные записи времени
- work_schedules - графики работы (заглушка)

## Логика определения статусов
- **Вовремя**: приход до 9:00
- **Опоздание**: приход после 9:00
- **Ранний уход**: уход до 18:00
- **Отсутствие**: нет данных о приходе